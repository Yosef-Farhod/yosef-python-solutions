<!DOCTYPE html>
<html lang='ar'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>ESP8266 | ÿ™ÿ≠ŸÉŸÖ ÿßÿ≠ÿ™ÿ±ÿßŸÅŸä</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
      color: #000000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
    }
    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    .status {
      font-size: 1.2em;
      margin-bottom: 20px;
      color: #00ffc8;
      animation: pulse 2s infinite;
    }
    .weight {
      font-size: 1.5em;
      margin-top: 20px;
      color: #ffa500;
      animation: glow 2s infinite;
    }
    .buttons {
      display: flex;
      gap: 30px;
      margin-top: 20px;
    }
    .btn {
      padding: 18px 36px;
      font-size: 1.2em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 0 15px rgba(0, 255, 200, 0.5);
    }
    .btn-on {
      background: #00ffc8;
      color: #000;
    }
    .btn-off {
      background: #ff4b5c;
      color: #fff;
    }
    .btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px rgba(0, 255, 200, 0.7);
    }
    .icon {
      font-size: 50px;
      margin-bottom: 20px;
      color: yellow;
    }
    @keyframes pulse {
      0% {opacity: 1;}
      50% {opacity: 0.6;}
      100% {opacity: 1;}
    }
    @keyframes glow {
      0% { text-shadow: 0 0 5px orange; }
      50% { text-shadow: 0 0 20px orange; }
      100% { text-shadow: 0 0 5px orange; }
    }
    #modeButton {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 10px;
      font-size: 1.2em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: #00ffc8;
      color: black;
      box-shadow: 0 0 10px rgba(0, 255, 200, 0.5);
    }
    .programmer {
      font-size: 1.2em;
      font-weight: bold;
      position: absolute;
      top: 10px;
      right: 10px;
      color: #ffcc00;
    }
    .name {
      font-size: 2.5em;
      font-weight: bold;
      color: #00ffcc;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="programmer">Programmer</div>
  <div class="name">Yosef Farhod</div>
  <div class='icon'>üí°</div>
  <h1>ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ•ÿ∂ÿßÿ°ÿ©</h1>
  <div class='status' id='ledStatus'>ÿßŸÑÿ≠ÿßŸÑÿ©: ...</div>
  <div class='buttons'>
    <button class='btn btn-on' onclick="sendCmd('on')">ÿ™ÿ¥ÿ∫ŸäŸÑ</button>
    <button class='btn btn-off' onclick="sendCmd('off')">ÿ•ŸäŸÇÿßŸÅ</button>
  </div>
  <div class='weight'>ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑÿ≠ÿßŸÑŸä: <span id="weightVal">...</span> ÿ¨ŸÖ</div>

  <!-- Light Mode / Dark Mode Toggle Button -->
  <button id="modeButton" onclick="toggleMode()">Night Mode</button>

  <script>
    async function sendCmd(cmd) {
      try {
        const response = await fetch('/' + cmd);
        const state = await response.text();
        document.getElementById('ledStatus').innerText = 'ÿßŸÑÿ≠ÿßŸÑÿ©: ' + state;
      } catch (error) {
        console.error('Error:', error);
      }
    }

    async function fetchWeight() {
      try {
        const response = await fetch('/weight');
        const data = await response.text();
        document.getElementById('weightVal').innerText = data;
      } catch (error) {
        console.error('Error fetching weight:', error);
        document.getElementById('weightVal').innerText = 'Error fetching data';
      }
    }

    setInterval(fetchWeight, 1000);

    // Toggle Light/Dark Mode
    function toggleMode() {
      const modeButton = document.getElementById('modeButton');
      const currentMode = modeButton.innerText;

      if (currentMode === "Night Mode") {
        document.body.style.backgroundColor = "#121212";
        document.body.style.color = "#ffffff";
        modeButton.innerText = "Day Mode";
      } else {
        document.body.style.backgroundColor = "#f4f4f4";
        document.body.style.color = "#000000";
        modeButton.innerText = "Night Mode";
      }
    }
  </script>
</body>
</html>